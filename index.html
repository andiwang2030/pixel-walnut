document.getElementById('filter-apply').addEventListener('click', applyFilters);
function applyFilters(){
  const cat = document.getElementById('filter-cat').value.trim();
  const q = document.getElementById('filter-q').value.trim().toLowerCase();
  // “营业中”先忽略，未来接实时营业判断
  merchantDots.forEach(({dot,label,merchant:m})=>{
    let show = true;
    if(cat && m.cat!==cat) show=false;
    if(q){
      const hay = (m.name+' '+(m.tags||[]).join(' ')+' '+(m.blurb||'')).toLowerCase();
      if(!hay.includes(q)) show=false;
    }
    dot.visible = label.visible = show;
  });
}
